# Source Code Setup and Execution Guide

## Bundled for Success: A WfBench-Driven Assessment of Texera

## Prerequisites

### Java 11 JDK

Install Java JDK 11

Set `JAVA_HOME`:

* **macOS:**

```bash
export JAVA_HOME=$(/usr/libexec/java_home -v 11)
```


### Python 3.10

Edit `core/amber/src/main/resources/udf.conf`:

```diff
 python {
-   path =
+   path = "/path/to/python/executable"
 }
```

### sbt (Scala Build Tool)

## Configuration

Update the following configuration files as indicated:

### Storage Configuration

Edit `core/workflow-core/src/main/resources/storage.conf`:

```diff
 storage {
     iceberg {
         catalog {
-            type = hadoop # either hadoop, rest, or postgres
+            type = postgres
         }
     }
 }
```



## Setup PostgreSQL


* **Install PostgreSQL**


* **Install Pgroonga (Full-text search support)**


* **Initialize databases:**

Execute core/scripts/sql/texera_ddl.sql to create texera_db database.

Execute core/scripts/sql/iceberg_postgres_catalog.sql to create the database for storing Iceberg catalogs.

Additionally, update the JDBC configuration in `core/workflow-core/src/main/resources/storage.conf` accordingly:

```conf
jdbc {
    url = "jdbc:postgresql://localhost:5432/texera_db?currentSchema=texera_db,public"
    url = ${?STORAGE_JDBC_URL}

    username = "postgres"
    username = ${?STORAGE_JDBC_USERNAME}

    password = ""
    password = ${?STORAGE_JDBC_PASSWORD}
}
```

## Running the Workflow

### Workflow Generation

Use `texera_workflow_json_generator.py`, check this file to modify the parameters and the path for storing the directory:

* The script will generate a directory containing:

  * A `bin` directory (with executables)
  * A `data` directory
  * A file named `workflow-texera.json`

* Move the generated `bin` and `data` directories into:

```
core/amber/
```

### Execute Workflow

* Start the Texera backend by navigating to the `core` directory and running:

```bash
./scripts/build.sh
```

* Open three separate terminals and execute the following scripts individually:

```bash
./scripts/server.sh
./scripts/workflow-compiling-service.sh
./scripts/workflow-computing-unit.sh
```

* Run the Texera Python client:

```bash
python texera-client/texera-python-client.py
```

* Enter the command:

```
exec /path/to/workflow-texera.json
```

Texera will now execute the workflow generated by wfbench.








